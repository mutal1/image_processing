#define _CRT_SECURE_NO_WARNINGS
#ifndef API_H_
#define API_H_

#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<math.h>

#define WIDTHBYTES(bits) (((bits)+31)/32*4)
#define headsize 1078

#pragma pack(2)

typedef unsigned char BYTE; // 1Byte
typedef unsigned short WORD; // 2Byte
typedef unsigned int DWORD; // 4Byte
typedef unsigned int LONG;

/*????? ????? ???? ????(???????)
-????????? ?????? ??????? ??? ?????*/
typedef struct tagBITMAPFILEHEADER
{
	WORD bfType; //'BM'???? ???? ??????
	DWORD bfSize; //????? ?????? ??????? ???
	WORD bfReserved1; //????? ????
	WORD bfReserved2; //????? ????
	DWORD bfOffBits; //???????? ????????? ???
}BITMAPFILEHEADER;

/*???? ????? ???? ????(???????)
-????? ???? ???? ??? ???,?¡À? ????,???? ??? ????
???? ??????? ????? ??????? ??¥ä????? ??????  ?????*/


typedef struct tagBITMAPINFOHEADER
{
	DWORD biSize; //????? ???
	LONG biWidth; //??? ?????? ?????? ??
	LONG biHeight; //?????? ????
	WORD  biplanes; //??? ?¡À???  ??(??? 1)
	WORD biBitCount; //????? ?????(?¡À?,??? ????)
	DWORD biCompression; //????????
	DWORD biSizeImage; //?????? ???(????? ????)
	LONG biXpelsPerMeter; //???? ???
	LONG biYpelsPerMeter; //???? ???
	DWORD biClrUsed; //???? ??? ???? ??
	DWORD biClrlmportant; // ????? ???? ?¥å???
}BITMAPINFOHEADER;

/*????
-?????? ?¥å????? ???? ?¡À????? ??????? ???? ????????.
?? ??????? ?????? ?????? ?? ??? ?ò÷?? ?????? ???????.
-256 ?¡À?????? ?????? ?????ò÷ ??? 256??,16 ??? ?¡À? ??????
???? ??? 2^16?????.biClrUsed ?????? ??????? ???.
-??????? ??? ?????? 256?????,????¡À??? ????
?¥å??? ?????? ???? ????????? ???? ???????? ?????? ????.*/

typedef struct tagRGBQUAD
{
	BYTE rgbBlue; // B ????
	BYTE rgbGreen; // G ????
	BYTE rgbRed; // R ????
	BYTE rgbReserved1; // ????? ????
}RGBQUAD;

int Grayraw2bmp(char* rawfile, char* bmpfile, DWORD width, DWORD height);
void change(BYTE* bmp_buffer, BYTE* raw_buffer, DWORD width, DWORD height);
void pallet(RGBQUAD* rgb);
void histogram(char* rawfile, char* histo_grpfile, DWORD wsize, DWORD hsize);
void histogramEQ(char* rawfile, char* EQ_rawfile, DWORD wsize, DWORD hsize);
void histogramCal(char* rawfile, DWORD wsize, DWORD hsize, int hist_arr[]);
void convolution(char* filename, char* convfile, DWORD wsize, DWORD hsize, int mwidth, int mheight);
void edge_detection(char* filename, char* edgefile, int wsize, int hsize);
void MoveImg(char* filename, char* output, int wsize, int hsize, int xd, int yd);
void NearestInterpolation(char* filename, char* output, double alpha, int wsize, int hsize);
void Binarization(char* filename, char* output, int width, int height, BYTE threshold);
void MirrorImg(char* filename, char* output, int wsize, int hsize);
void FlipImg(char* filename, char* output, int wsize, int hsize);

BYTE clampping(int conv_x, int conv_y);
BYTE conv_clam(int convsum, float rate);

#endif